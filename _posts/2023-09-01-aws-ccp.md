---
layout: post
title: AWS Certified Cloud Practitioner(CLF-C01) 
author: taku
date: 2023-09-01 15:00
last_modified_at: 2023-09-01 16:00
tags: [AWS, Certification]
toc: true
---

Studying AWS Certified Cloud Practitioner 🧰

今期目標にAWS CCP(CLF-C01)の合格を掲げてしまったので残り1カ月で勉強していく。

**AWS認定資格試験テキスト　AWS認定 クラウドプラクティショナー　改訂第2版 (ＡＷＳ認定資格試験テキスト)**
<img src="https://m.media-amazon.com/images/P/B0C73QX2CT.01._SCLZZZZZZZ_SX500_.jpg" width="200px">

参考書の問題と解説を読んで、必要だと思った箇所をメモしていきます。

## EC2

- 必要な時に必要なだけのEC2インスタンスを使用できる。

- 必要なEC2インスタンスの数を予測する必要はない。

- 運用を開始した後に柔軟に性能を変更できる。

- 必要なEC2インスタンスの性能を予測する必要はない。

- 使った分だ時間単位/秒単位の料金が発生する。

- アウト通信に転送料金が発生する。

- 数分でEC2を世界中で起動できる。

- AMIから同じ構成のEC2インスタンスを何台でも起動できる。

- EC2インスタンスへのトラフィックはセキュリティグループのインバウンド(受信)で制御する。

- オペレーティングシステムの管理者はキーペアで安全にログインし、root権限、Administrator権限を持つ。

- ユースケースに応じて料金オプションを使い分けることでコスト効率が向上する。

## ELB

- EC2インスタンスの可用性を高めるためにELBを使用することができる。

- HTTP/HTTPSではApplication Load Balancerを使い、それ以外のTCPではNetwork Load Balancerを使う。

- ELBには、正常なインスタンスのみにトラフィックを送すためのヘルスチェック機能がある。

- ELBはインターネット向けにも内部向けにも対応している。

- インターネット向けだけではなく内部にもELBを挟むことによって、システムの可能性を高めることができる。

- ELB自体が高可用性のマネージドサービスなので単一障害点とはならない。

- 複数のアベイラビリティゾーンに負荷分散を実行できるのでリリースの負荷が均等になる。

## Auto Scaling

- Auto ScalingによってEC2インスタンスを必要なときに自動で増減できる。

- Auto Scalingのメリットは、高可用性、耐障害性、コスト効率化。

- 垂直スケーリングよりも水平スケーリングのほうがスケーラビリティを確保しやすい。

- Auto Scalingでは起動設定(何を)、Auto Scalingグループ(どこで)、スケーリングポリシー(いつ)を設定する。

- EC2ユーザーデータを使うことでコマンドを自動実行しデプロイ処理を自動化することができる。

- EC2の情報(IPアドレスやインスタンスID)はメタデータから取得できる。

- ELB、CloudWatch、Auto Scalingの3つのサービスで、自動的でスケーラブルなアプリケーションを構築できる。

## Lambda

- サーバ構築や環境の準備することなく、すぐに開発を始められる。

- サーバの運用から解放され、開発に注力できる。

- Lambdaを使うために新しい言語の勉強は不要。すぐに始められる。

- メモリを割り当てることで他のリソースの性能も割り当てられる。

- リクエストに応じて水平的にスケーリングして並行で関数が実行される。

- Auto Scalingを設定する必要がない。

- 実行されている時間に対してミリ秒単位の無駄がない課金がなされる。

- 実行されていない待機時間には課金されない。

- AWSサービスの処理を簡単に自動化できる。

- AWSサービスからのトリガーを使用することで、イベントからLambdaを実行できる。

## EBS

EBSは、**Amazon Elastic Block Store** の略で、EC2インスタンスにアタッチして使用するブロックストレージボリューム。

- EC2インスタンスのボリュームとして使用。
※ユーザが利用するこれらストレージ系の実体

- アベイラビリティゾーン内でレプリケート。

- ボリュームタイプの変更が可能。

- 容量の変更が可能

- 高い耐久性のスナップショット。

-ボリュームの暗号化。

- 永久的ストレージ

## S3

**Amazon Simple Storage Service** の略で、Sが3つ並ぶことから **S3** と呼ばれている。インターネット対応の完全マネージド型のオブジェクトストレージ。

- 無制限のストレージ容量

- 高い耐久性

- インターネット経由でアクセス

S3で使用することで、ストレージの管理や冗長化、事前の容量を確保することを考えることなく、アプリケーションやサービス開発に注力できる。

### 重要ポイント

- S3パケット、オブジェクトはデフォルトでプライベート。

- アクセスコントロールリストで簡単にアクセス権を設定できる。

- パケットポリシーでより詳細にアクセス権を設定できる。

- EC2などのAWSリソースにS3へのアクセス権を設定する際はIAMロールを使用する。

- HTTPSアクセスできる。

- 保存データの暗号化は複数の方法から選択できる。

### 重要ポイント

- ストレージ料金はストレージクラスによりコスト効率を高めることができる。

- ライフサイクルポリシーによりストレージクラスの変更を自動化できる。

- リージョン外へのアウト通信のみデータ転送料金が発生する。

## VPC

VPCは **Amazon Virtual Peivate Cloud** の略。隔離されたプライベートなネットワーク構成をお客様がコントロールできるサービス。

- VPCはリージョンを選択して作成。

- CIDRでVPCのプライベートIPアドレスの範囲を定義。

### サブネット

VPCで設定したアドレス範囲をサブネットに分けて定義します。サブネットは作成するときにアベイラビリティゾーンとIPアドレス範囲を定義します。

サブネットでは、最初の4つのIPアドレスと最後の1つのIPアドレスがAWSによって予約されているので、お客様が使うことはできません。
「10.0.0.0/24」とした場合に実際に使えるIPアドレスは256-5で251となる。

- 10.0.1.0：ネットワークアドレス

- 10.0.1.1：VPCルーター用

- 10.0.1.2：AWSで予約

- 10.0.1.3：将来の利用のためAWSで予約

- 10.0.1.255：ネットワークブロードキャストアドレス

### 重要ポイント

- サブネットはアベイラビリティゾーンを選択して作成。

- CIDRでサブネットのプライベートIPアドレスの範囲を定義。

## インターネットゲートウェイ

VPCとパブリックインターネットを接続するためのゲートウェイ

インターネットゲートウェイ自体が水平スケーリングによる冗長性の高い可用性を持っているため、 **単一障害点(Single Point Of Failure、SPOF)** にはなりません。

### 重要ポイント

- インターネットゲートウェイはVPCとパブリックインターネットに接続

- インターネットゲートウェイ自体が高可用性と冗長性を持っている

## ルートテーブル

サブネットの経路をルートテーブルで設定します。ルートテーブルはVPCを選択して作成します。

### 重要ポイント

- ルートテーブルはサブネットと関連付ける。

- サブネット内のリソースがどこに接続できるかを定義する。

## パブリックサブネットとプライベートサブネット

- サブネットは役割で分割する

- 外部インターネット接続できるのがパブリックサブネット

- 外部インターネットに接続せず外部アクセスからリソースを保護できるのがプライベートサブネット

## セキュリティグループ

セキュリティグループとは仮想ファイアウォール機能です。VPC内のリソース(EC2, RDS, ELBなど)のトラフィックを制御します。

- セキュリティグループは、インスタンスに対してのトラフィックを制御する仮想ファイアウォール。

- 許可するインバウンドのポートと送信元を設定するホワイトリスト。

- 送信元には、CIDRか他のセキュリティグループIDを指定できる。

## ネットワークACL

ネットワークACL(アクセスコントロールリスト)はサブネットに対して設定する仮想ファイアウォール機能です。

- ネットワークACLは、サブネットに対してのトラフィックを制御する仮想ファイアウォール。

- 拒否するインバウンドのポートと送信元を設定するブラックリスト。

- 必要無ければ設定しない追加のセキュリティレイヤー。

### 外部からEC2インスタンスにアクセスするための重要ポイント

- インターネットゲートウェイをVPCにアタッチする。

- インターネットゲートウェイへの経路を持つルートテーブルをサブネットに関連付ける。

- EC2インスタンスをそのサブネット内で起動する。

- EC2インスタンスにパブリックIPアドレスを有効にする(またはEC2パブリックIPアドレスを固定するElastic IPアドレスをアタッチする)。

## CloudFront

- CloudFrontはエッジロケーションを使用するCDNサービス

- エッジロケーションにキャッシュを持つことで低レイテンシー配信を実現

- 世界中のエッジロケーションが利用できるので、ユーザへは最もレイテンシーの低いエッジロケーションから配信される。

- 通信を保護するために証明書を設定できる。

- 外部の攻撃からも守ることができる。

## Route53

Route53は、エッジロケーションで使用されるDNSサービス。

- 複数のレコードを設定し、用途に応じて最適なルーティングを選択できる。

## RDS

RDSは **Amazon Relational Database Service** の略。AWSで簡単にリレーショナルデータベースを使用することができる。

使用できるDBエンジン

- Amazon Aurora

- MySQL

- PostgresSQL

- MariaDB

- Oracle

- Microcoft SQL Server


- オンプレミスで使われているデータベースエンジンをそのまま簡単に使うことができる。

- RDSを使うことでエンジニアはインフラ管理から解放され、本来やるべき開発に注力できる。

- OS、データベースエンジンのメンテナンスをAWSに任せることができる。

- データベースのバックアップを管理しなくて良い。

- バックアップ期間中の任意の特定期間中のインスタンスを起動できる。

- マルチAZは一を使用することでデータベースの高可用性を実現できる。

## Amazon Aurora

AWSがクラウドに最適化して再設計したリレーショナルデータベースエンジン。MySQL、PostgresSQLのインターフェース機能を持っている。

MySQL、PostgresSQLを使用しているアプリケーションはAuroraをそのまま使用できる可能性が高い。

Auroraを使用するメリットは以下

- バックアップが非常に強固

- スタンバイにアクセスできる(リードレプリカがマスター昇格する)

- リードレプリカは15個作成できる

- RDS MySQLに比べ5倍の性能

- ディスク容量を見込みで確保しなくても自動で増加する

## DMS

AWS Database Migration Service。

データベース間でデータを移行できるサービス

DMSによりオンプレミスからAWSへの継続的なデータ移行を行い、システムのダウンタイムを最小限にできる。

## DynamoDB

Amazon DynamoDBはNoSQL型の高いパフォーマンスを持ったフルマネージド型のデータベースサービス。

最低限の設定ではテーブル名とプリマリキーを決めれば使い始めることができる。

また、最初からマルチAZな環境となっているため、リーションを選択するだけ良い。

- データの特徴やシステム用権威応じて適したデータベースサービスを選択する。

- 中規模程度のアクセス量で、整合性や複雑なクエリを必要とする場合はRDSを選択する。(空席予約などの厳密な確定処理)

- 大規模なアクセス寮で、単純な自由度の高いデータモデルを扱う場合はDynamoDBを選択する。

## その他のデータベースサービス

- Amazon Redshift：高速でシンプルなデータウェアハウスサービス。データ分析に使用する。大規模なデータ分析にも対応している。

- Amazon ElactiCashe：インメモリデータストアサービス。オープンソースのRedis、Memcahedのマネージドサービスとして使用できる。RDSやDynamoDBのクエリ結果のキャッシュに使用したり、アプリケーションのセッション情報を管理する用途で使われる。

- Amazon Neptune：フルマネージドなグラフデータベースサービス。関係性や相関情報を扱う。SNS、レコメンデーションエンジン、経路案内、物流最適化などのアプリケーション機能に使用される。

## CloudWatch

Amazon CloudWatchはEC2インスタンス、RDSインスタンス、DynamoDBテーブルなどの各インスタンスの現在の状態、情報をモニタリングするサービス。

標準メトリクスという、AWSが管理している範囲の情報をお客様側での追加の設定なしで収集している。

主な機能

- 標準(組み込み)メトリクスの収集、可視化

- カスタムメトリクスの収集、可視化

- ログの収集

- アラーム


- EC2のCloudWatch LogsはCloudWatchエージェントで取得できる。

- CloudWatch LogsによりEC2をよりステートレスにできる。

- CloudWatch Logsは文字列のフィルタリング結果をメトリクスとして扱える。

## Trusted Advisor

Trusted Advisorはお客様のAWSアカウント環境の状態を自動的にチェックして回り、ベストプラクティスに対してどうであったかを示すアドバイスをレポートします。

チェックする支店は次の5つ

- コスト最適化：無駄なコストが発生してないかがチェックされる。

- パフォーマンス：最適なサービス、サイズが選択されているかがチェックされる。

- セキュリティ：環境にリスクのある設定がないかがチェックされる。

- フォールトトレランス(耐障害性)：耐障害性が低い状態がないかチェックされる。

- サービス制限：制限に近づいたサービスがアラート報告される。

## その他の管理ツール

### CloudTrail

CloudTrailはAWSアカウント内の全てのAPI呼び出しを記録する。

API呼び出しを記録するということは、AWSアカウント内におけるすべての操作を記録すること。

監査や運用に使用できる。

また、似たサービスでAWS Configがある。AWS ConfigはAWSリソースの変更を自動記録して運用効率と整合性を高めます。

誰がいつ何を変更したかが自動で記録される。

### CloudFormation

CloudFormationはAWSの各リソースを含めた環境を自動生成／更新／管理する。

JSON形式またはYAML形式で記述されたテンプレートから、Stackというリソースの集合体を生成する。CloudFormationを使用することで同一のAWS環境を何度でも自動で構築できる。

### Elastic Beanstalk

Elastic Beanstalkは、Webアプリケーションの環境を簡単にAWSに構築する。設定パラメータを提供することで、ApacheやNginx、IIS、各言語の実行環境も合わせて簡単に構築できる。Webアプリケーションやタスク実行環境を構築することに向いている。

## AWSのサポートプラン

AWSアカウントには4つのサポートプランがある。運用の安全性を保ち、エスカレーションパス(問合せ先)を確保できます。

それぞれのサポートには違いがあるのでここで押さえておく。

- ベーシックプラン
 - AWSアカウントを作ったときに提供される無料のサポートプラン
 - 技術サポートは、AWSサービスの稼働状況をモニタリングしているヘルスチェックについてのサポートのみ
 - Trusted Advisorは最低限必要な項目のみ

- 開発者プラン
 - 29USDか使用料の3%の大きい方
 - 技術サポートを作成できるユーザは1ユーザ(9:00~18:00)
 - 構成要素についてのアーキテクチャサポート
 - Trusted Advisorは最低限必要な項目のみ
 - ケース重要度と応答時間は、一般的なガイダンス(24時間以内)、システム障害(12時間以内)

- ビジネスプラン
 - 100USDか使用料に応じた計算式の大きい方
 - 技術サポートを作成できるユーザは無制限(24時間)
 - アーキテクチャはユースケースのガイダンス
 - Trusted Advisorは全項目
 - サポートAPIの使用可
 - サードパーティソフトウェアのサポート
 - ケース重要度と応答時間は、開発者プランに加え、本番システムのお障害(4時間以内)、本番システムのダウン(1時間以内)

- エンタープライズプラン
 - 15,000USDか使用料に応じた計算式の大きい方
 - 技術サポートを作成できるユーザは無制限(24時間)
 - アプリケーションのアーキテクチャサポート
 - Trusted Advisorは全項目
 - サポートAPIの使用可
 - サードパーティソフトウェアのサポート
 - テクニカルアカウントマネージャ(TAM)
 - サポートコンシェルジュ
 - ホワイトグローブケースルーティング
 - 管理ビジネス評価
 - ケース重要度と応答時間は、ビジネスプランに加え、ビジネスクリティカルなシステムのダウン(15分以内)

本番稼働している環境がある場合はビジネスプラン異常が推奨です。問合せ先を確保して運用することが重要。

問題が発生している特定のリージョンやサービス、影響を受けるリソースの情報はAWS Healthダッシュボードで確認できる。


























